<%- include('partials/header', { title: '排名 - 英语题库' }) %>

<div class="card">
    <h2 style="margin-bottom: 1.5rem;">用户排名</h2>
    
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(500px, 1fr)); gap: 2rem; margin-bottom: 2rem;">
        <!-- 上传题目排名 -->
        <div>
            <h3 style="margin-bottom: 1rem; color: #3498db;">
                <i class="fas fa-upload"></i> 上传题目排名
            </h3>
            
            <% if (uploadRanking.length === 0) { %>
                <p style="text-align: center; color: #7f8c8d; padding: 2rem;">暂无数据</p>
            <% } else { %>
                <div class="ranking-table">
                    <% uploadRanking.forEach((user, index) => { %>
                        <div class="ranking-item card" style="margin-bottom: 0.5rem;">
                            <div class="ranking-rank">#<%= index + 1 %></div>
                            <div class="ranking-info">
                                <div style="font-weight: bold;"><%= user.username %></div>
                                <div>上传题目: <%= user.problems_uploaded %> 个</div>
                            </div>
                        </div>
                    <% }) %>
                </div>
            <% } %>
        </div>
        
        <!-- 正确率排名 -->
        <div>
            <h3 style="margin-bottom: 1rem; color: #2ecc71;">
                <i class="fas fa-percentage"></i> 正确率排名
            </h3>
            
            <% if (correctRanking.length === 0) { %>
                <p style="text-align: center; color: #7f8c8d; padding: 2rem;">暂无数据</p>
            <% } else { %>
                <div class="ranking-table">
                    <% correctRanking.forEach((user, index) => { %>
                        <div class="ranking-item card" style="margin-bottom: 0.5rem;">
                            <div class="ranking-rank">#<%= index + 1 %></div>
                            <div class="ranking-info">
                                <div style="font-weight: bold;"><%= user.username %></div>
                                <div>正确率: <%= user.correct_rate %>%</div>
                                <div style="font-size: 0.9rem; color: #7f8c8d;">
                                    答题: <%= user.total_attempts %> 次 | 正确: <%= user.correct_attempts %> 次
                                </div>
                            </div>
                        </div>
                    <% }) %>
                </div>
            <% } %>
        </div>
    </div>
    
    <div style="background-color: #f8f9fa; padding: 1.5rem; border-radius: 6px; margin-top: 2rem;">
        <h4><i class="fas fa-info-circle"></i> 排名说明</h4>
        <ul style="margin-top: 0.5rem;">
            <li>上传题目排名：按用户上传的题目数量排序</li>
            <li>正确率排名：按用户答题正确率排序（需至少答题10次）</li>
            <li>数据每日更新一次</li>
        </ul>
    </div>
</div>

<%- include('partials/footer') %>